#!/usr/bin/env bash
#
# Run all dotfiles installers.

set -e

cd "$(dirname $0)"/..

# Set macOS defaults
echo "› Mac OS defaults"
macos/defaults.sh

echo "› nvm"
# Install nvm + latest
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh | bash

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh" # This loads nvm

# Install homebrew
homebrew/install.sh 2>&1

# Run Homebrew through the Brewfile
echo "› brew bundle"
brew bundle

echo "› installers"
# find the installers and run them iteratively
find . -name install.sh | while read installer ; do sh -c "${installer}" ; done

echo ''
echo '  All stuff installed!'
